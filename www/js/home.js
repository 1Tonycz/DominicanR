/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./scripts/home.js":
/*!*************************!*\
  !*** ./scripts/home.js ***!
  \*************************/
/***/ (() => {

eval("/**\n * Init drag & drop areas, preview generation and image deletion.\n */\ndocument.addEventListener('DOMContentLoaded', () => {\n    const mainInput = document.getElementById('mainImageInput');\n    const mainDrop  = document.getElementById('main-drop-area');\n    const mainPrev  = document.getElementById('main-preview');\n\n    const galleryInput = document.getElementById('galleryInput');\n    const galleryDrop  = document.getElementById('gallery-drop-area');\n    const galleryPrev  = document.getElementById('gallery-preview');\n\n    if (mainInput && mainDrop && mainPrev) {\n        setupSingleUploader(mainInput, mainDrop, mainPrev);\n    }\n\n    if (galleryInput && galleryDrop && galleryPrev) {\n        setupGalleryUploader(galleryInput, galleryDrop, galleryPrev);\n    }\n\n    initExistingDeletes();\n});\n\n/**\n * Single file upload (main image)\n */\nfunction setupSingleUploader(input, dropArea, previewList) {\n    let file = null;\n\n    const updateInput = () => {\n        const dt = new DataTransfer();\n        if (file) dt.items.add(file);\n        input.files = dt.files;\n    };\n\n    const handle = (list) => {\n        file = list[0];\n        previewList.innerHTML = '';\n        const {wrapper, del} = createPreview(file);\n        del.addEventListener('click', (e) => {\n            e.stopPropagation();\n            file = null;\n            wrapper.remove();\n            updateInput();\n        });\n        previewList.appendChild(wrapper);\n        updateInput();\n    };\n\n    input.addEventListener('change', () => {\n        if (input.files.length) {\n            handle(input.files);\n            input.value = '';\n        }\n    });\n\n    setupDropEvents(dropArea, handle);\n    input.closest('form').addEventListener('submit', updateInput);\n}\n\n/**\n * Multiple files upload (gallery)\n */\nfunction setupGalleryUploader(input, dropArea, previewList) {\n    const files = [];\n\n    const updateInput = () => {\n        const dt = new DataTransfer();\n        files.forEach(f => dt.items.add(f));\n        input.files = dt.files;\n    };\n\n    const addFiles = (list) => {\n        Array.from(list).forEach((file) => {\n            files.push(file);\n            const {wrapper, del} = createPreview(file);\n            del.addEventListener('click', (e) => {\n                e.stopPropagation();\n                const idx = files.indexOf(file);\n                if (idx > -1) files.splice(idx, 1);\n                wrapper.remove();\n                updateInput();\n            });\n            previewList.appendChild(wrapper);\n        });\n        updateInput();\n    };\n\n    input.addEventListener('change', () => {\n        if (input.files.length) {\n            addFiles(input.files);\n            input.value = '';\n        }\n    });\n\n    setupDropEvents(dropArea, addFiles);\n    input.closest('form').addEventListener('submit', updateInput);\n}\n\n/**\n * Basic drag & drop listeners\n */\nfunction setupDropEvents(dropArea, onFiles) {\n    ['dragenter', 'dragover'].forEach(evt => {\n        dropArea.addEventListener(evt, (e) => {\n            e.preventDefault();\n            dropArea.classList.add('highlight');\n        });\n    });\n    ['dragleave', 'drop'].forEach(evt => {\n        dropArea.addEventListener(evt, (e) => {\n            e.preventDefault();\n            dropArea.classList.remove('highlight');\n        });\n    });\n    dropArea.addEventListener('drop', (e) => {\n        e.preventDefault();\n        onFiles(Array.from(e.dataTransfer.files));\n    });\n}\n\n/**\n * Creates preview item with delete button\n */\nfunction createPreview(file) {\n    const wrapper = document.createElement('div');\n    wrapper.className = 'accom-images__preview';\n\n    const img = document.createElement('img');\n    wrapper.appendChild(img);\n\n    const del = document.createElement('span');\n    del.className = 'accom-images__delete';\n    del.textContent = '×';\n    wrapper.appendChild(del);\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n        img.src = e.target.result;\n    };\n    reader.readAsDataURL(file);\n\n    return {wrapper, del};\n}\n\n/**\n * Handle delete of already uploaded images (edit form)\n */\nfunction initExistingDeletes() {\n    document.querySelectorAll('#gallery-preview .accom-images__delete[data-id]').forEach(btn => {\n        btn.addEventListener('click', (e) => {\n            e.stopPropagation();\n            const imageId = btn.dataset.id;\n            if (!imageId) return;\n\n            const wrapper = btn.closest('.accom-images__preview');\n\n            fetch(`?do=deleteImage&id=${imageId}`, {\n                method: 'POST',\n                headers: {'X-Requested-With': 'XMLHttpRequest'}\n            }).then(res => {\n                if (res.ok) {\n                    wrapper.remove();\n                } else {\n                    alert('Mazání se nezdařilo.');\n                }\n            }).catch(err => {\n                console.error('Chyba požadavku:', err);\n            });\n        });\n    });\n}\n\n\n//# sourceURL=webpack://dominicanr/./scripts/home.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./scripts/home.js"]();
/******/ 	
/******/ })()
;